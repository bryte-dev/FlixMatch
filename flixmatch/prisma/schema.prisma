generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id         Int        @id @default(autoincrement())
  email      String     @unique
  name       String
}

model Movie {
  id       Int     @id @default(autoincrement())
  tmdb_id  Int     @unique // ID du film depuis TMDB
  title    String
  media_type String
  poster_path String
  watchlists Watchlist[]
}

model Watchlist {
  id        Int     @id @default(autoincrement())
  movieId   Int     @unique  // Un film ne peut être dans la watchlist qu'une fois
  status    WatchlistStatus @default(WATCHLIST)
  rating    Int?   // Note du film (1-10)
  isFavorite Boolean @default(false) // Si le film est favori ou non

  movie     Movie  @relation(fields: [movieId], references: [id])
}

enum WatchlistStatus {
  WATCHLIST  // Film ajouté mais pas encore vu
  SEEN       // Film marqué comme vu
  JUNK       // Film mis à la corbeille
}
